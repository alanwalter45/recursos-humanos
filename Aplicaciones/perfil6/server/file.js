var _0x5ecb=['mimetype','.jpg','application/pdf','.pdf','audio/mp3','.mp3','video/mp4','.mp4','destination','/files/upload/publicacion','file','path','replace','photos','img','rename','unlink','/files/delete-publicacion','json','unlinkSync','/files/copy-file-biometrico','tipoArchivo','docs','/biometrico/','format','DD-MM-YYYY','chmodSync','777','exports','Router','multer','/public/assets/photos','/files/create-folder','parse','body','mkdirSync','createReadStream','/imagen-perfil.jpg','pipe','createWriteStream','status','send','post','/files/upload','single','imagen','size','nombreArchivo','propietario'];(function(_0x1c304c,_0x299a78){var _0x251667=function(_0x1e55e0){while(--_0x1e55e0){_0x1c304c['push'](_0x1c304c['shift']());}};_0x251667(++_0x299a78);}(_0x5ecb,0x143));var _0x204f=function(_0x48a133,_0x4a6caf){_0x48a133=_0x48a133-0x0;var _0x3184ca=_0x5ecb[_0x48a133];return _0x3184ca;};const express=require('express');const router=express[_0x204f('0x0')]();const fs=require('fs');const multer=require(_0x204f('0x1'));const upload=multer({'dest':__dirname+_0x204f('0x2')});const moment=require('moment');router['post'](_0x204f('0x3'),(_0x52a925,_0x461f6b,_0x257b3e)=>{const _0x2c3a1b=JSON[_0x204f('0x4')](_0x52a925[_0x204f('0x5')]['json']);const _0x3e1d74=_0x2c3a1b['propietario'];const _0x4b5148=__dirname+'/public/assets/photos';if(!fs['existsSync'](_0x4b5148+'/'+_0x3e1d74)){fs[_0x204f('0x6')](_0x4b5148+'/'+_0x3e1d74);fs[_0x204f('0x7')](_0x4b5148+_0x204f('0x8'))[_0x204f('0x9')](fs[_0x204f('0xa')](_0x4b5148+'/'+_0x3e1d74+_0x204f('0x8')));}_0x461f6b[_0x204f('0xb')](0xc8)[_0x204f('0xc')](!![]);});router[_0x204f('0xd')](_0x204f('0xe'),upload[_0x204f('0xf')](_0x204f('0x10')),(_0x342902,_0xb12af1,_0x19b73f)=>{let _0x55bde6=_0x342902['file'];if(_0x55bde6==undefined){_0xb12af1[_0x204f('0xb')](0xc8)[_0x204f('0xc')](!![]);}else{let _0x486e67=_0x55bde6['path'];if(_0x55bde6[_0x204f('0x11')]/0x400/0x400<=0x3){let _0x4afe11=_0x342902[_0x204f('0x5')][_0x204f('0x12')];let _0x4cde38=_0x342902[_0x204f('0x5')][_0x204f('0x13')];let _0xd85623='';switch(_0x55bde6[_0x204f('0x14')]){case'image/jpeg':_0xd85623=_0x204f('0x15');break;case _0x204f('0x16'):_0xd85623=_0x204f('0x17');break;case _0x204f('0x18'):_0xd85623=_0x204f('0x19');break;case _0x204f('0x1a'):_0xd85623=_0x204f('0x1b');break;}const _0x469f67=_0x55bde6[_0x204f('0x1c')]+'/'+_0x4cde38+'/'+_0x4afe11+_0xd85623;fs['rename'](_0x486e67,_0x469f67,_0x4e0313=>{if(_0x4e0313)throw _0x4e0313;_0xb12af1['status'](0xc8)[_0x204f('0xc')](!![]);});}else{fs['unlink'](_0x486e67,_0x1abca6=>{if(_0x1abca6)throw _0x1abca6;});_0xb12af1[_0x204f('0xb')](0xc8)[_0x204f('0xc')](![]);}}});router[_0x204f('0xd')](_0x204f('0x1d'),upload[_0x204f('0xf')](_0x204f('0x10')),(_0x344240,_0x288507,_0x2bb276)=>{let _0x484217=_0x344240[_0x204f('0x1e')];if(_0x484217==undefined){_0x288507[_0x204f('0xb')](0xc8)[_0x204f('0xc')](!![]);}else{let _0x44b257=_0x484217[_0x204f('0x1f')];if(_0x484217[_0x204f('0x11')]/0x400/0x400<=0x1){let _0x1f3e3c=_0x344240['body'][_0x204f('0x12')];let _0x231061=_0x344240[_0x204f('0x5')][_0x204f('0x13')];let _0x302d51=_0x484217[_0x204f('0x1c')][_0x204f('0x20')](_0x204f('0x21'),_0x204f('0x22'))+'/publicaciones/'+_0x1f3e3c;fs[_0x204f('0x23')](_0x44b257,_0x302d51,_0x5d6b69=>{if(_0x5d6b69){throw _0x5d6b69;}_0x288507[_0x204f('0xb')](0xc8)[_0x204f('0xc')](!![]);});}else{fs[_0x204f('0x24')](_0x44b257,_0x287f11=>{if(_0x287f11){throw _0x287f11;}});_0x288507['status'](0xc8)[_0x204f('0xc')](![]);}}});router['post'](_0x204f('0x25'),(_0x56166d,_0xc69bd,_0x1613a9)=>{const _0x3de87=JSON[_0x204f('0x4')](_0x56166d[_0x204f('0x5')][_0x204f('0x26')]);const _0xec29e0=_0x3de87[_0x204f('0x12')];const _0x4ceeb2=__dirname+'/public/assets/img/publicaciones/'+_0xec29e0;fs[_0x204f('0x27')](_0x4ceeb2);_0xc69bd[_0x204f('0xb')](0xc8)['send'](!![]);});router[_0x204f('0xd')](_0x204f('0x28'),upload['single'](_0x204f('0x10')),(_0x2d7448,_0x9b6d2d,_0x761701)=>{let _0x17df60=_0x2d7448['file'];if(_0x17df60==undefined){_0x9b6d2d[_0x204f('0xb')](0xc8)[_0x204f('0xc')](!![]);}else{let _0x5607d3=_0x17df60[_0x204f('0x1f')];if(_0x17df60[_0x204f('0x11')]/0x400/0x400<=0x12c){let _0x5d93bd=_0x2d7448[_0x204f('0x5')][_0x204f('0x12')];let _0x172d63=_0x2d7448[_0x204f('0x5')][_0x204f('0x29')];let _0x108e5c=_0x2d7448[_0x204f('0x5')][_0x204f('0x13')];const _0x4095af=_0x17df60[_0x204f('0x1c')][_0x204f('0x20')](_0x204f('0x21'),_0x204f('0x2a'))+_0x204f('0x2b')+_0x5d93bd+moment(new Date()['getTime']())[_0x204f('0x2c')](_0x204f('0x2d'))+'.'+_0x172d63;fs[_0x204f('0x23')](_0x5607d3,_0x4095af,_0xa98b6b=>{if(_0xa98b6b){throw _0xa98b6b;}fs[_0x204f('0x2e')](_0x4095af,_0x204f('0x2f'));_0x9b6d2d[_0x204f('0xb')](0xc8)[_0x204f('0xc')](!![]);});}else{fs[_0x204f('0x24')](_0x5607d3,_0x4ce8bc=>{if(_0x4ce8bc)throw _0x4ce8bc;});_0x9b6d2d[_0x204f('0xb')](0xc8)['send'](![]);}}});module[_0x204f('0x30')]=router;