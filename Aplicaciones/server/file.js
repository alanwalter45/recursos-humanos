var _0x52e7=['file','status','size','nombreArchivo','mimetype','image/jpeg','application/pdf','.pdf','.mp3','video/mp4','rename','unlink','/files/upload/publicacion','path','destination','replace','photos','img','/publicaciones/','/files/delete-publicacion','/public/assets/img/publicaciones/','tipoArchivo','docs','/biometrico/','getTime','format','chmodSync','777','/files/copy-file-hoja-vida','/hojas-vida/','DD-MM-YYYY','exports','express','multer','post','/files/create-folder','parse','body','json','propietario','/public/assets/photos','existsSync','mkdirSync','createReadStream','/imagen-perfil.jpg','createWriteStream','send','/files/upload','single','imagen'];(function(_0x28127c,_0x1fc20d){var _0x4ae023=function(_0x57b72f){while(--_0x57b72f){_0x28127c['push'](_0x28127c['shift']());}};_0x4ae023(++_0x1fc20d);}(_0x52e7,0x11a));var _0x5c28=function(_0x552219,_0x2823cd){_0x552219=_0x552219-0x0;var _0x51cac1=_0x52e7[_0x552219];return _0x51cac1;};const express=require(_0x5c28('0x0'));const router=express['Router']();const fs=require('fs');const multer=require(_0x5c28('0x1'));const upload=multer({'dest':__dirname+'/public/assets/photos'});const moment=require('moment');router[_0x5c28('0x2')](_0x5c28('0x3'),(_0x408bad,_0x31b50a,_0x1f8228)=>{const _0x4b9939=JSON[_0x5c28('0x4')](_0x408bad[_0x5c28('0x5')][_0x5c28('0x6')]);const _0x454a79=_0x4b9939[_0x5c28('0x7')];const _0x30093d=__dirname+_0x5c28('0x8');if(!fs[_0x5c28('0x9')](_0x30093d+'/'+_0x454a79)){fs[_0x5c28('0xa')](_0x30093d+'/'+_0x454a79);fs[_0x5c28('0xb')](_0x30093d+_0x5c28('0xc'))['pipe'](fs[_0x5c28('0xd')](_0x30093d+'/'+_0x454a79+_0x5c28('0xc')));}_0x31b50a['status'](0xc8)[_0x5c28('0xe')](!![]);});router[_0x5c28('0x2')](_0x5c28('0xf'),upload[_0x5c28('0x10')](_0x5c28('0x11')),(_0x138c38,_0x5a36a6,_0x4d899f)=>{let _0x213c88=_0x138c38[_0x5c28('0x12')];if(_0x213c88==undefined){_0x5a36a6[_0x5c28('0x13')](0xc8)[_0x5c28('0xe')](!![]);}else{let _0x5e9da2=_0x213c88['path'];if(_0x213c88[_0x5c28('0x14')]/0x400/0x400<=0x3){let _0x49a6b2=_0x138c38[_0x5c28('0x5')][_0x5c28('0x15')];let _0x2207b6=_0x138c38['body'][_0x5c28('0x7')];let _0x327bfc='';switch(_0x213c88[_0x5c28('0x16')]){case _0x5c28('0x17'):_0x327bfc='.jpg';break;case _0x5c28('0x18'):_0x327bfc=_0x5c28('0x19');break;case'audio/mp3':_0x327bfc=_0x5c28('0x1a');break;case _0x5c28('0x1b'):_0x327bfc='.mp4';break;}const _0x42e192=_0x213c88['destination']+'/'+_0x2207b6+'/'+_0x49a6b2+_0x327bfc;fs[_0x5c28('0x1c')](_0x5e9da2,_0x42e192,_0x4225d4=>{if(_0x4225d4)throw _0x4225d4;_0x5a36a6['status'](0xc8)[_0x5c28('0xe')](!![]);});}else{fs[_0x5c28('0x1d')](_0x5e9da2,_0x4db666=>{if(_0x4db666)throw _0x4db666;});_0x5a36a6[_0x5c28('0x13')](0xc8)['send'](![]);}}});router[_0x5c28('0x2')](_0x5c28('0x1e'),upload[_0x5c28('0x10')](_0x5c28('0x11')),(_0x1babf2,_0x13ba48,_0xf1b2d4)=>{let _0x2df6f5=_0x1babf2[_0x5c28('0x12')];if(_0x2df6f5==undefined){_0x13ba48[_0x5c28('0x13')](0xc8)[_0x5c28('0xe')](!![]);}else{let _0xa7ae30=_0x2df6f5[_0x5c28('0x1f')];if(_0x2df6f5[_0x5c28('0x14')]/0x400/0x400<=0x1){let _0x2f3c0a=_0x1babf2['body']['nombreArchivo'];let _0x4b213f=_0x1babf2[_0x5c28('0x5')][_0x5c28('0x7')];let _0x1fd2fa=_0x2df6f5[_0x5c28('0x20')][_0x5c28('0x21')](_0x5c28('0x22'),_0x5c28('0x23'))+_0x5c28('0x24')+_0x2f3c0a;fs['rename'](_0xa7ae30,_0x1fd2fa,_0xd699cd=>{if(_0xd699cd){throw _0xd699cd;}_0x13ba48['status'](0xc8)[_0x5c28('0xe')](!![]);});}else{fs[_0x5c28('0x1d')](_0xa7ae30,_0x4ebc68=>{if(_0x4ebc68){throw _0x4ebc68;}});_0x13ba48[_0x5c28('0x13')](0xc8)[_0x5c28('0xe')](![]);}}});router[_0x5c28('0x2')](_0x5c28('0x25'),(_0x1d9de9,_0x20791e,_0x52c9dc)=>{const _0x1b7fd7=JSON[_0x5c28('0x4')](_0x1d9de9[_0x5c28('0x5')]['json']);const _0x2b1c85=_0x1b7fd7[_0x5c28('0x15')];const _0x44a0e0=__dirname+_0x5c28('0x26')+_0x2b1c85;fs['unlinkSync'](_0x44a0e0);_0x20791e['status'](0xc8)[_0x5c28('0xe')](!![]);});router[_0x5c28('0x2')]('/files/copy-file-biometrico',upload[_0x5c28('0x10')](_0x5c28('0x11')),(_0x538dd2,_0x3d774d,_0x4a9df2)=>{let _0x804ccd=_0x538dd2[_0x5c28('0x12')];if(_0x804ccd==undefined){_0x3d774d[_0x5c28('0x13')](0xc8)[_0x5c28('0xe')](!![]);}else{let _0x4e4ea1=_0x804ccd[_0x5c28('0x1f')];if(_0x804ccd[_0x5c28('0x14')]/0x400/0x400<=0xa){let _0x1cd0db=_0x538dd2[_0x5c28('0x5')][_0x5c28('0x15')];let _0x435b8e=_0x538dd2[_0x5c28('0x5')][_0x5c28('0x27')];let _0x7e9a25=_0x538dd2[_0x5c28('0x5')][_0x5c28('0x7')];const _0x3d2160=_0x804ccd['destination']['replace'](_0x5c28('0x22'),_0x5c28('0x28'))+_0x5c28('0x29')+_0x1cd0db+moment(new Date()[_0x5c28('0x2a')]())[_0x5c28('0x2b')]('DD-MM-YYYY')+'.'+_0x435b8e;fs[_0x5c28('0x1c')](_0x4e4ea1,_0x3d2160,_0x34eb70=>{if(_0x34eb70){throw _0x34eb70;}fs[_0x5c28('0x2c')](_0x3d2160,_0x5c28('0x2d'));_0x3d774d[_0x5c28('0x13')](0xc8)['send'](!![]);});}else{fs[_0x5c28('0x1d')](_0x4e4ea1,_0x5da467=>{if(_0x5da467)throw _0x5da467;});_0x3d774d[_0x5c28('0x13')](0xc8)[_0x5c28('0xe')](![]);}}});router[_0x5c28('0x2')](_0x5c28('0x2e'),upload[_0x5c28('0x10')](_0x5c28('0x11')),(_0x2ffab4,_0x3fde61,_0x25fb95)=>{let _0x35aa51=_0x2ffab4[_0x5c28('0x12')];if(_0x35aa51==undefined){_0x3fde61['status'](0xc8)[_0x5c28('0xe')](!![]);}else{let _0x227fa7=_0x35aa51[_0x5c28('0x1f')];if(_0x35aa51[_0x5c28('0x14')]/0x400/0x400<=0x5){let _0xf3f1c6=_0x2ffab4[_0x5c28('0x5')][_0x5c28('0x15')];let _0x194fa0=_0x2ffab4[_0x5c28('0x5')]['tipoArchivo'];let _0x46be5f=_0x2ffab4[_0x5c28('0x5')]['propietario'];const _0x2e8b38=_0x35aa51['destination']['replace'](_0x5c28('0x22'),'docs')+_0x5c28('0x2f')+_0xf3f1c6+'-'+moment(new Date()[_0x5c28('0x2a')]())[_0x5c28('0x2b')](_0x5c28('0x30'))+'.'+_0x194fa0;fs['rename'](_0x227fa7,_0x2e8b38,_0xdba31d=>{if(_0xdba31d){throw _0xdba31d;}fs[_0x5c28('0x2c')](_0x2e8b38,'777');_0x3fde61[_0x5c28('0x13')](0xc8)[_0x5c28('0xe')](!![]);});}else{fs['unlink'](_0x227fa7,_0x1e5ea1=>{if(_0x1e5ea1)throw _0x1e5ea1;});_0x3fde61[_0x5c28('0x13')](0xc8)[_0x5c28('0xe')](![]);}}});module[_0x5c28('0x31')]=router;