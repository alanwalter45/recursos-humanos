var _0x37cb=['single','status','send','path','size','body','mimetype','image/jpeg','application/pdf','.pdf','audio/mp3','video/mp4','.mp4','rename','/files/upload/publicacion','nombreArchivo','destination','replace','photos','img','/publicaciones/','unlinkSync','/files/copy-file-biometrico','imagen','file','tipoArchivo','/biometrico/','format','DD-MM-YYYY','chmodSync','unlink','/hojas-vida/','exports','express','multer','moment','post','/files/create-folder','parse','json','propietario','/public/assets/photos','existsSync','/imagen-perfil.jpg','createWriteStream'];(function(_0x516896,_0xcbee16){var _0x246ed4=function(_0x849c6b){while(--_0x849c6b){_0x516896['push'](_0x516896['shift']());}};_0x246ed4(++_0xcbee16);}(_0x37cb,0x189));var _0x4c33=function(_0x29163c,_0x37f898){_0x29163c=_0x29163c-0x0;var _0x491b3d=_0x37cb[_0x29163c];return _0x491b3d;};const express=require(_0x4c33('0x0'));const router=express['Router']();const fs=require('fs');const multer=require(_0x4c33('0x1'));const upload=multer({'dest':__dirname+'/public/assets/photos'});const moment=require(_0x4c33('0x2'));router[_0x4c33('0x3')](_0x4c33('0x4'),(_0x295acf,_0x41297a,_0x4da73f)=>{const _0x4d1c66=JSON[_0x4c33('0x5')](_0x295acf['body'][_0x4c33('0x6')]);const _0x47b25c=_0x4d1c66[_0x4c33('0x7')];const _0x4ef478=__dirname+_0x4c33('0x8');if(!fs[_0x4c33('0x9')](_0x4ef478+'/'+_0x47b25c)){fs['mkdirSync'](_0x4ef478+'/'+_0x47b25c);fs['createReadStream'](_0x4ef478+_0x4c33('0xa'))['pipe'](fs[_0x4c33('0xb')](_0x4ef478+'/'+_0x47b25c+_0x4c33('0xa')));}_0x41297a['status'](0xc8)['send'](!![]);});router[_0x4c33('0x3')]('/files/upload',upload[_0x4c33('0xc')]('imagen'),(_0xff4c5b,_0xfc4883,_0x28f568)=>{let _0x4fef94=_0xff4c5b['file'];if(_0x4fef94==undefined){_0xfc4883[_0x4c33('0xd')](0xc8)[_0x4c33('0xe')](!![]);}else{let _0x18bfa0=_0x4fef94[_0x4c33('0xf')];if(_0x4fef94[_0x4c33('0x10')]/0x400/0x400<=0x3){let _0xe47e26=_0xff4c5b[_0x4c33('0x11')]['nombreArchivo'];let _0x645fc7=_0xff4c5b['body'][_0x4c33('0x7')];let _0xde028b='';switch(_0x4fef94[_0x4c33('0x12')]){case _0x4c33('0x13'):_0xde028b='.jpg';break;case _0x4c33('0x14'):_0xde028b=_0x4c33('0x15');break;case _0x4c33('0x16'):_0xde028b='.mp3';break;case _0x4c33('0x17'):_0xde028b=_0x4c33('0x18');break;}const _0x4a9da3=_0x4fef94['destination']+'/'+_0x645fc7+'/'+_0xe47e26+_0xde028b;fs[_0x4c33('0x19')](_0x18bfa0,_0x4a9da3,_0x180cb8=>{if(_0x180cb8)throw _0x180cb8;_0xfc4883[_0x4c33('0xd')](0xc8)['send'](!![]);});}else{fs['unlink'](_0x18bfa0,_0x7c38d2=>{if(_0x7c38d2)throw _0x7c38d2;});_0xfc4883[_0x4c33('0xd')](0xc8)[_0x4c33('0xe')](![]);}}});router[_0x4c33('0x3')](_0x4c33('0x1a'),upload[_0x4c33('0xc')]('imagen'),(_0x5a6f6a,_0x3feb77,_0x14765f)=>{let _0x20a698=_0x5a6f6a['file'];if(_0x20a698==undefined){_0x3feb77[_0x4c33('0xd')](0xc8)['send'](!![]);}else{let _0xc26be=_0x20a698['path'];if(_0x20a698[_0x4c33('0x10')]/0x400/0x400<=0x1){let _0x2f1ac0=_0x5a6f6a[_0x4c33('0x11')][_0x4c33('0x1b')];let _0x18ebba=_0x5a6f6a[_0x4c33('0x11')][_0x4c33('0x7')];let _0x2e8c34=_0x20a698[_0x4c33('0x1c')][_0x4c33('0x1d')](_0x4c33('0x1e'),_0x4c33('0x1f'))+_0x4c33('0x20')+_0x2f1ac0;fs[_0x4c33('0x19')](_0xc26be,_0x2e8c34,_0x29b91d=>{if(_0x29b91d){throw _0x29b91d;}_0x3feb77['status'](0xc8)[_0x4c33('0xe')](!![]);});}else{fs['unlink'](_0xc26be,_0x45a17d=>{if(_0x45a17d){throw _0x45a17d;}});_0x3feb77[_0x4c33('0xd')](0xc8)['send'](![]);}}});router[_0x4c33('0x3')]('/files/delete-publicacion',(_0x5ec50a,_0x23f465,_0x31efda)=>{const _0x24e16e=JSON[_0x4c33('0x5')](_0x5ec50a[_0x4c33('0x11')][_0x4c33('0x6')]);const _0x15c74f=_0x24e16e['nombreArchivo'];const _0xaa5c83=__dirname+'/public/assets/img/publicaciones/'+_0x15c74f;fs[_0x4c33('0x21')](_0xaa5c83);_0x23f465[_0x4c33('0xd')](0xc8)[_0x4c33('0xe')](!![]);});router[_0x4c33('0x3')](_0x4c33('0x22'),upload[_0x4c33('0xc')](_0x4c33('0x23')),(_0x3a50ba,_0x968a55,_0x1b60be)=>{let _0x1af4ef=_0x3a50ba[_0x4c33('0x24')];if(_0x1af4ef==undefined){_0x968a55[_0x4c33('0xd')](0xc8)['send'](!![]);}else{let _0x2fae72=_0x1af4ef[_0x4c33('0xf')];if(_0x1af4ef[_0x4c33('0x10')]/0x400/0x400<=0xa){let _0x1ae4b2=_0x3a50ba[_0x4c33('0x11')]['nombreArchivo'];let _0x12de1f=_0x3a50ba[_0x4c33('0x11')][_0x4c33('0x25')];let _0x1245d0=_0x3a50ba['body'][_0x4c33('0x7')];const _0x485c72=_0x1af4ef[_0x4c33('0x1c')][_0x4c33('0x1d')](_0x4c33('0x1e'),'docs')+_0x4c33('0x26')+_0x1ae4b2+moment(new Date()['getTime']())[_0x4c33('0x27')](_0x4c33('0x28'))+'.'+_0x12de1f;fs[_0x4c33('0x19')](_0x2fae72,_0x485c72,_0x268175=>{if(_0x268175){throw _0x268175;}fs[_0x4c33('0x29')](_0x485c72,'777');_0x968a55['status'](0xc8)[_0x4c33('0xe')](!![]);});}else{fs[_0x4c33('0x2a')](_0x2fae72,_0x3d3afd=>{if(_0x3d3afd)throw _0x3d3afd;});_0x968a55[_0x4c33('0xd')](0xc8)[_0x4c33('0xe')](![]);}}});router[_0x4c33('0x3')]('/files/copy-file-hoja-vida',upload[_0x4c33('0xc')](_0x4c33('0x23')),(_0x20cc71,_0x3472af,_0xed5236)=>{let _0x213164=_0x20cc71[_0x4c33('0x24')];if(_0x213164==undefined){_0x3472af[_0x4c33('0xd')](0xc8)[_0x4c33('0xe')](!![]);}else{let _0x1d6fbb=_0x213164[_0x4c33('0xf')];if(_0x213164['size']/0x400/0x400<=0x5){let _0x46e2d3=_0x20cc71[_0x4c33('0x11')][_0x4c33('0x1b')];let _0x1e5a95=_0x20cc71[_0x4c33('0x11')]['tipoArchivo'];let _0xb34712=_0x20cc71['body'][_0x4c33('0x7')];const _0x199f91=_0x213164['destination'][_0x4c33('0x1d')]('photos','docs')+_0x4c33('0x2b')+_0x46e2d3+'-'+moment(new Date()['getTime']())[_0x4c33('0x27')](_0x4c33('0x28'))+'.'+_0x1e5a95;fs[_0x4c33('0x19')](_0x1d6fbb,_0x199f91,_0x332ad9=>{if(_0x332ad9){throw _0x332ad9;}fs['chmodSync'](_0x199f91,'777');_0x3472af[_0x4c33('0xd')](0xc8)[_0x4c33('0xe')](!![]);});}else{fs['unlink'](_0x1d6fbb,_0x5f765b=>{if(_0x5f765b)throw _0x5f765b;});_0x3472af[_0x4c33('0xd')](0xc8)['send'](![]);}}});module[_0x4c33('0x2c')]=router;