var _0x45e1=['viaje','ausente','comision','retraso','vinculacion_laboral','log','\x0a\x20\x20\x20\x20UPDATE\x20temp_resumen_calculos\x20tmp\x20INNER\x20JOIN\x20temp_userinfo\x20usi\x20ON\x20tmp.carnet_identidad=usi.carnet_identidad\x0a\x20\x20\x20\x20\x20\x20set\x20tmp.matrimonio=?\x20,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20tmp.duelo=?,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20tmp.nacimiento=?,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20tmp.vacacion=?,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20tmp.baja_medica=?,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20tmp.viaje=?,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20tmp.ausente=?,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20tmp.comision=?,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20tmp.licencia_sin_goce_haber=?,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20tmp.retraso=?,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20usi.tipo_cargo=?\x0a\x20\x20\x20\x20WHERE\x20tmp.id=?\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20','affectedRows','/planillas/tickear','tickeado','carnet_identidad','exports','express','./../../middleware','./../../databaseMysql','moment','query','\x0a\x20\x20\x20SELECT\x0a\x20\x20\x20resumen.id,\x0a\x20\x20\x20sp.codigo_biometrico,\x0a\x20\x20\x20sp.carnet_identidad,\x0a\x20\x20\x20sp.nombre_completo,\x0a\x20\x20\x20sp.fecha_nacimiento,\x0a\x20\x20\x20sp.fecha_inicio,\x0a\x20\x20\x20sp.cargo,\x0a\x20\x20\x20sp.tipo_cargo\x20as\x20vinculacion_laboral,\x0a\x20\x20\x20sp.telefono,\x0a\x20\x20\x20sp.estado,\x0a\x20\x20\x20resumen.retraso\x20as\x20retraso,\x0a\x20\x20\x20(resumen.matrimonio/8)\x20as\x20matrimonio,\x0a\x20\x20\x20(resumen.duelo/8)\x20as\x20duelo,\x0a\x20\x20\x20(resumen.nacimiento/8)\x20as\x20nacimiento,\x0a\x20\x20\x20(resumen.licencia_sin_goce_haber/8)\x20as\x20lsgh,\x0a\x20\x20\x20(resumen.vacacion/8)\x20as\x20vacacion,\x0a\x20\x20\x20(resumen.baja_medica/8)\x20as\x20baja_medica,\x0a\x20\x20\x20(resumen.viaje/8)\x20as\x20viaje,\x0a\x20\x20\x20resumen.ausente\x20as\x20ausente,\x0a\x20\x20\x20(resumen.comision/8)\x20as\x20comision,\x0a\x20\x20\x20(\x0a\x20\x20\x20\x20\x20(resumen.matrimonio/8)\x20+\x20(resumen.duelo/8)\x20+\x20(resumen.nacimiento/8)\x20+\x20(resumen.licencia_sin_goce_haber/8)\x20+\x20(resumen.vacacion/8)\x20+\x20(resumen.baja_medica/8)\x20+\x20(resumen.viaje/8)\x20+\x20resumen.ausente\x20+\x20(resumen.comision/8))\x20as\x20total_dias\x0aFROM\x20temp_userinfo\x20sp\x20INNER\x20JOIN\x20temp_resumen_calculos\x20resumen\x20ON\x20sp.codigo_biometrico=resumen.codigo_biometrico\x0aWHERE\x20resumen.fecha_importacion\x20like\x20\x27','format','YYYY-MM-DD','%\x27\x20AND\x20sp.fecha_importacion\x20like\x20\x27','status','send','stringify','post','/planillas/buscar','parse','body','json','fecha_importacion','\x0a\x20\x20\x20SELECT\x0a\x20\x20\x20resumen.id,\x0a\x20\x20\x20sp.codigo_biometrico,\x0a\x20\x20\x20sp.carnet_identidad,\x0a\x20\x20\x20sp.nombre_completo,\x0a\x20\x20\x20sp.fecha_nacimiento,\x0a\x20\x20\x20sp.fecha_inicio,\x0a\x20\x20\x20sp.cargo,\x0a\x20\x20\x20sp.tipo_cargo\x20as\x20vinculacion_laboral,\x0a\x20\x20\x20sp.telefono,\x0a\x20\x20\x20sp.estado,\x0a\x20\x20\x20resumen.retraso\x20as\x20retraso,\x0a\x20\x20\x20(resumen.matrimonio/8)\x20as\x20matrimonio,\x0a\x20\x20\x20(resumen.duelo/8)\x20as\x20duelo,\x0a\x20\x20\x20(resumen.nacimiento/8)\x20as\x20nacimiento,\x0a\x20\x20\x20(resumen.licencia_sin_goce_haber/8)\x20as\x20lsgh,\x0a\x20\x20\x20(resumen.vacacion/8)\x20as\x20vacacion,\x0a\x20\x20\x20(resumen.baja_medica/8)\x20as\x20baja_medica,\x0a\x20\x20\x20(resumen.viaje/8)\x20as\x20viaje,\x0a\x20\x20\x20resumen.ausente\x20as\x20ausente,\x0a\x20\x20\x20(resumen.comision/8)\x20as\x20comision,\x0a\x20\x20\x20(\x0a\x20\x20\x20\x20\x20(resumen.matrimonio/8)\x20+\x20(resumen.duelo/8)\x20+\x20(resumen.nacimiento/8)\x20+\x20(resumen.licencia_sin_goce_haber/8)\x20+\x20(resumen.vacacion/8)\x20+\x20(resumen.baja_medica/8)\x20+\x20(resumen.viaje/8)\x20+\x20resumen.ausente\x20+\x20(resumen.comision/8))\x20as\x20total_dias\x0aFROM\x20temp_userinfo\x20sp\x20INNER\x20JOIN\x20temp_resumen_calculos\x20resumen\x20ON\x20sp.codigo_biometrico=resumen.codigo_biometrico\x0aWHERE\x20resumen.fecha_importacion=?\x20AND\x20sp.fecha_importacion\x20like\x20\x27','%\x27\x0aORDER\x20BY\x20sp.nombre_completo\x0a\x0a\x20\x20','/planillas/get-servant','ensureAuthenticated','numero_documento','\x0a\x20\x20\x20SELECT\x0a\x20\x20\x20resumen.id,\x0a\x20\x20\x20sp.codigo_biometrico,\x0a\x20\x20\x20sp.carnet_identidad,\x0a\x20\x20\x20sp.nombre_completo,\x0a\x20\x20\x20sp.fecha_nacimiento,\x0a\x20\x20\x20sp.fecha_inicio,\x0a\x20\x20\x20sp.cargo,\x0a\x20\x20\x20sp.tipo_cargo\x20as\x20vinculacion_laboral,\x0a\x20\x20\x20sp.telefono,\x0a\x20\x20\x20sp.estado,\x0a\x20\x20\x20resumen.retraso\x20as\x20retraso,\x0a\x20\x20\x20(resumen.matrimonio/8)\x20as\x20matrimonio,\x0a\x20\x20\x20(resumen.duelo/8)\x20as\x20duelo,\x0a\x20\x20\x20(resumen.nacimiento/8)\x20as\x20nacimiento,\x0a\x20\x20\x20(resumen.licencia_sin_goce_haber/8)\x20as\x20lsgh,\x0a\x20\x20\x20(resumen.vacacion/8)\x20as\x20vacacion,\x0a\x20\x20\x20(resumen.baja_medica/8)\x20as\x20baja_medica,\x0a\x20\x20\x20(resumen.viaje/8)\x20as\x20viaje,\x0a\x20\x20\x20resumen.ausente\x20as\x20ausente,\x0a\x20\x20\x20(resumen.comision/8)\x20as\x20comision,\x0a\x20\x20\x20(\x0a\x20\x20\x20\x20\x20(resumen.matrimonio/8)\x20+\x20(resumen.duelo/8)\x20+\x20(resumen.nacimiento/8)\x20+\x20(resumen.licencia_sin_goce_haber/8)\x20+\x20(resumen.vacacion/8)\x20+\x20(resumen.baja_medica/8)\x20+\x20(resumen.viaje/8)\x20+\x20resumen.ausente\x20+\x20(resumen.comision/8))\x20as\x20total_dias\x0aFROM\x20temp_userinfo\x20sp\x20INNER\x20JOIN\x20temp_resumen_calculos\x20resumen\x20ON\x20sp.codigo_biometrico=resumen.codigo_biometrico\x0aWHERE\x20AND\x20sp.carnet_identidad=?\x0aORDER\x20BY\x20sp.nombre_completo\x0a\x0a\x20\x20','length','/planillas/update','matrimonio','duelo','nacimiento','vacacion','baja_medica'];(function(_0x439e98,_0x980d4b){var _0x385e3c=function(_0x196f74){while(--_0x196f74){_0x439e98['push'](_0x439e98['shift']());}};_0x385e3c(++_0x980d4b);}(_0x45e1,0x164));var _0x3f12=function(_0x3e79bd,_0x58f6e3){_0x3e79bd=_0x3e79bd-0x0;var _0x5d2704=_0x45e1[_0x3e79bd];return _0x5d2704;};const express=require(_0x3f12('0x0'));const router=express['Router']();const middleware=require(_0x3f12('0x1'));const mysqldb=require(_0x3f12('0x2'));const moment=require(_0x3f12('0x3'));router['get']('/planillas',middleware['ensureAuthenticated'],(_0x201b6a,_0x129903,_0x46ab31)=>{mysqldb[_0x3f12('0x4')](_0x3f12('0x5')+moment(new Date())[_0x3f12('0x6')](_0x3f12('0x7'))+_0x3f12('0x8')+moment(new Date())[_0x3f12('0x6')](_0x3f12('0x7'))+'%\x27\x0aORDER\x20BY\x20sp.nombre_completo\x0a\x0a\x20\x20',function(_0x15d5bb,_0x4ccfb3){if(_0x15d5bb)throw _0x15d5bb;_0x129903[_0x3f12('0x9')](0xc8)[_0x3f12('0xa')](JSON[_0x3f12('0xb')](_0x4ccfb3));});});router[_0x3f12('0xc')](_0x3f12('0xd'),middleware['ensureAuthenticated'],(_0x3840c4,_0x4ce4d4,_0x536fb4)=>{const _0x1b7dd5=JSON[_0x3f12('0xe')](_0x3840c4[_0x3f12('0xf')][_0x3f12('0x10')]);const _0x37a877=_0x1b7dd5[_0x3f12('0x11')];mysqldb[_0x3f12('0x4')](_0x3f12('0x12')+moment(new Date())[_0x3f12('0x6')]('YYYY-MM-DD')+_0x3f12('0x13'),[_0x37a877],function(_0x485382,_0x339e42){if(_0x485382)throw _0x485382;_0x4ce4d4[_0x3f12('0x9')](0xc8)[_0x3f12('0xa')](JSON['stringify'](_0x339e42));});});router['post'](_0x3f12('0x14'),middleware[_0x3f12('0x15')],(_0x40fb4c,_0x5ee050,_0x40a9f2)=>{const _0x12e68f=JSON[_0x3f12('0xe')](_0x40fb4c[_0x3f12('0xf')][_0x3f12('0x10')]);const _0xb42d1c=_0x12e68f[_0x3f12('0x16')];mysqldb[_0x3f12('0x4')](_0x3f12('0x17'),[_0xb42d1c],function(_0x49de56,_0x508a1c){if(_0x49de56)throw _0x49de56;_0x5ee050[_0x3f12('0x9')](0xc8)[_0x3f12('0xa')]({'success':_0x508a1c[_0x3f12('0x18')],'result':_0x508a1c[0x0]});});});router['post'](_0x3f12('0x19'),middleware[_0x3f12('0x15')],(_0x102959,_0x8b3027,_0x377c38)=>{const _0x34a2f9=JSON['parse'](_0x102959[_0x3f12('0xf')][_0x3f12('0x10')]);const _0x5d447b=_0x34a2f9['id'];const _0x10781a=_0x34a2f9[_0x3f12('0x1a')];const _0x4accc1=_0x34a2f9[_0x3f12('0x1b')];const _0x1b977d=_0x34a2f9[_0x3f12('0x1c')];const _0xdeebf9=_0x34a2f9[_0x3f12('0x1d')];const _0x22aa05=_0x34a2f9[_0x3f12('0x1e')];const _0x37c0d3=_0x34a2f9[_0x3f12('0x1f')];const _0x131fde=_0x34a2f9[_0x3f12('0x20')];const _0x999468=_0x34a2f9[_0x3f12('0x21')];const _0x3ed4f2=_0x34a2f9['lsgh'];const _0x49bf6e=_0x34a2f9[_0x3f12('0x22')];const _0x22000d=_0x34a2f9[_0x3f12('0x23')];console[_0x3f12('0x24')](_0x22000d);mysqldb[_0x3f12('0x4')](_0x3f12('0x25'),[_0x10781a*0x8,_0x4accc1*0x8,_0x1b977d*0x8,_0xdeebf9*0x8,_0x22aa05*0x8,_0x37c0d3*0x8,_0x131fde,_0x999468*0x8,_0x3ed4f2*0x8,_0x49bf6e,_0x22000d,_0x5d447b],function(_0x106156,_0x264f9d){if(_0x106156)throw _0x106156;_0x8b3027[_0x3f12('0x9')](0xc8)['send']({'success':_0x264f9d[_0x3f12('0x26')]?!![]:![]});});});router['post'](_0x3f12('0x27'),middleware[_0x3f12('0x15')],(_0x16bc37,_0x316da8,_0xe0613)=>{const _0x573469=JSON[_0x3f12('0xe')](_0x16bc37['body'][_0x3f12('0x10')]);const _0xf4d5b=_0x573469[_0x3f12('0x28')];const _0x1a6ead=_0x573469[_0x3f12('0x29')];const _0x3f0770=_0x573469[_0x3f12('0x11')];mysqldb['query']('\x0a\x20\x20\x20\x20UPDATE\x20temp_resumen_calculos\x20set\x20tickeado=?\x0a\x20\x20\x20\x20WHERE\x20carnet_identidad=?\x20AND\x20fecha_importacion=?\x0a\x0a\x20\x20\x20\x20\x20\x20',[_0xf4d5b,_0x1a6ead,_0x3f0770],function(_0x21e688,_0x498127){if(_0x21e688)throw _0x21e688;_0x316da8[_0x3f12('0x9')](0xc8)[_0x3f12('0xa')]({'success':_0x498127[_0x3f12('0x26')]?!![]:![]});});});module[_0x3f12('0x2a')]=router;