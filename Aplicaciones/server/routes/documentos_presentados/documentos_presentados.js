var _0x4afa=['moment','post','/documentos-presentados/get-all','ensureAuthenticated','parse','json','query','status','send','length','/documentos_presentados/update-image','single','imagen','\x0a\x20\x20UPDATE\x20documentos_presentados\x20SET\x20imagen_adjunta=?\x0a\x20\x20WHERE\x20id=?\x20AND\x20registro_id=?','file','body','documento_presentado_id','affectedRows','readFileSync','tickeado','\x0a\x20\x20UPDATE\x20documentos_presentados\x20SET\x20tickeado=?,\x20fecha_modificacion=?\x0a\x20\x20WHERE\x20registro_id=?\x20AND\x20id=?','/documentos_presentados/reset','registro_id','\x0a\x20\x20delete\x20from\x20documentos_presentados\x0a\x20\x20where\x20registro_id=?','\x0a\x20\x20\x20\x20insert\x20into\x20documentos_presentados(documento_requerido_id,registro_id,tickeado)\x0a\x20\x20\x20\x20select\x20id,?,?\x20FROM\x20documentos_requeridos\x0a\x20\x20\x20\x20where\x20gestion_id\x20=\x20(select\x20id\x20from\x20gestiones\x20where\x20selected=1)','express','./../../databaseMysql','multer'];(function(_0x506330,_0x19e9dc){var _0x27f605=function(_0x156979){while(--_0x156979){_0x506330['push'](_0x506330['shift']());}};_0x27f605(++_0x19e9dc);}(_0x4afa,0x1d9));var _0x2cba=function(_0x191749,_0x541246){_0x191749=_0x191749-0x0;var _0x141da8=_0x4afa[_0x191749];return _0x141da8;};const express=require(_0x2cba('0x0'));const router=express['Router']();const middleware=require('./../../middleware');const mysqldb=require(_0x2cba('0x1'));const multer=require(_0x2cba('0x2'));const upload=multer({'dest':__dirname+'/public/assets/photos'});const fs=require('fs');const moment=require(_0x2cba('0x3'));router[_0x2cba('0x4')](_0x2cba('0x5'),middleware[_0x2cba('0x6')],(_0x2d9033,_0x59cfa1,_0x3f09ac)=>{const _0x18dbe6=JSON[_0x2cba('0x7')](_0x2d9033['body'][_0x2cba('0x8')]);const _0x5d581b=_0x18dbe6['registro_id'];mysqldb[_0x2cba('0x9')]('\x0a\x0a\x20\x20SELECT\x20dp.*,\x0a\x20\x20dr.nombre\x20as\x20documento_requerido,\x0a\x20\x20dr.ubicacion\x20as\x20documento_requerido_ubicacion\x20\x0a\x20\x20FROM\x20documentos_presentados\x20dp\x20\x0a\x20\x20INNER\x20JOIN\x20documentos_requeridos\x20dr\x20ON\x20dp.documento_requerido_id\x20=\x20dr.id\x0a\x20\x20WHERE\x20registro_id=\x20?\x20',[_0x5d581b],(_0x15e89b,_0x1b364a)=>{if(_0x15e89b)throw _0x15e89b;_0x59cfa1[_0x2cba('0xa')](0xc8)[_0x2cba('0xb')]({'success':_0x1b364a[_0x2cba('0xc')]?!![]:![],'result':_0x1b364a});});});router[_0x2cba('0x4')](_0x2cba('0xd'),upload[_0x2cba('0xe')](_0x2cba('0xf')),(_0x53a8f0,_0x5de9a7,_0x1af673)=>{mysqldb[_0x2cba('0x9')](_0x2cba('0x10'),[fs['readFileSync'](_0x53a8f0[_0x2cba('0x11')]['path']),_0x53a8f0[_0x2cba('0x12')][_0x2cba('0x13')],_0x53a8f0[_0x2cba('0x12')]['registro_id']],function(_0x245cd7,_0x1695f6){if(_0x245cd7)throw _0x245cd7;_0x5de9a7['status'](0xc8)['send']({'success':_0x1695f6[_0x2cba('0x14')]?!![]:![],'result':fs[_0x2cba('0x15')](_0x53a8f0['file']['path'])});});});router[_0x2cba('0x4')]('/documentos_presentados/set-presentado',middleware[_0x2cba('0x6')],(_0x1d6d19,_0x2f70ac,_0x54400a)=>{const _0x2a08ba=JSON['parse'](_0x1d6d19['body'][_0x2cba('0x8')]);const _0x3a9bed=_0x2a08ba[_0x2cba('0x16')];const _0x36d254=_0x2a08ba['registro_id'];const _0x29ab60=_0x2a08ba[_0x2cba('0x13')];mysqldb['query'](_0x2cba('0x17'),[_0x3a9bed,moment(new Date())['format']('YYYY-MM-DD\x20HH:mm:ss'),_0x36d254,_0x29ab60],function(_0x4b57ab,_0x2199d9){if(_0x4b57ab)throw _0x4b57ab;_0x2f70ac[_0x2cba('0xa')](0xc8)[_0x2cba('0xb')]({'success':_0x2199d9[_0x2cba('0x14')]?!![]:![],'result':_0x2199d9});});});router[_0x2cba('0x4')](_0x2cba('0x18'),middleware[_0x2cba('0x6')],(_0x38119d,_0x589725,_0x35eec3)=>{const _0x375e59=JSON[_0x2cba('0x7')](_0x38119d['body']['json']);const _0xeb7d89=_0x375e59[_0x2cba('0x19')];mysqldb['query'](_0x2cba('0x1a'),[_0xeb7d89],_0x23d2bc=>{if(_0x23d2bc)throw _0x23d2bc;mysqldb['query'](_0x2cba('0x1b'),[_0xeb7d89,0x0],function(_0x4bf807,_0xc62460){if(_0x4bf807)throw _0x4bf807;_0x589725['status'](0xc8)[_0x2cba('0xb')](JSON['stringify']({'success':_0xc62460[_0x2cba('0x14')]?!![]:![]}));});});});module['exports']=router;