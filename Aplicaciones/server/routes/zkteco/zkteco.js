var _0xddc6=['post','/zkteco/info-general','body','json','getTime','format','YYYY-MM-DD\x20hh:mm:ss','version','serial','status','send','stringify','/zkteco/get-attendence','parse','connect','getAttendance','disconnect','parallelize','query','begin\x20transaction','length','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20INSERT\x20INTO\x20marcaciones(user_id,estado,fecha_hora)\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20SELECT\x20?,?,?\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20WHERE\x20NOT\x20EXISTS\x20(SELECT\x201\x20from\x20marcaciones\x20where\x20user_id=?\x20and\x20fecha_hora=?)\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','state','commit','/zkteco/get-users','getUser','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20INSERT\x20INTO\x20usuarios_biometrico(numero_tarjeta,nombre,contrasenha,user_id,rol)\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20SELECT\x20?,?,?,?,?\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20WHERE\x20NOT\x20EXISTS\x20(SELECT\x201\x20from\x20usuarios_biometrico\x20where\x20user_id=?)\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','cardno','name','password','rol','userid','exports','express','Router','moment','./../../databaseMysql'];(function(_0x1ad074,_0x9f8784){var _0x50079b=function(_0x3ecc38){while(--_0x3ecc38){_0x1ad074['push'](_0x1ad074['shift']());}};_0x50079b(++_0x9f8784);}(_0xddc6,0xda));var _0x12ef=function(_0x408242,_0x49f91a){_0x408242=_0x408242-0x0;var _0x56c6a3=_0xddc6[_0x408242];return _0x56c6a3;};const ZkLib=require('zklib');const express=require(_0x12ef('0x0'));const router=express[_0x12ef('0x1')]();const moment=require(_0x12ef('0x2'));const mysqldb=require(_0x12ef('0x3'));router[_0x12ef('0x4')](_0x12ef('0x5'),function(_0x52c073,_0x15705d){let _0x52cf30=JSON['parse'](_0x52c073[_0x12ef('0x6')][_0x12ef('0x7')]);Zk=new ZkLib({'ip':_0x52cf30['ip'],'port':0x1112,'inport':0x1450,'timeout':0x1388});Zk['connect'](function(_0x1dba4c){if(_0x1dba4c)throw _0x1dba4c;var _0x205f33={};Zk[_0x12ef('0x8')](function(_0x21a6e5,_0x3a3154){if(_0x21a6e5)throw _0x21a6e5;var _0x3a3154=moment(_0x3a3154)[_0x12ef('0x9')](_0x12ef('0xa'));_0x205f33['time']=_0x3a3154;Zk[_0x12ef('0xb')](function(_0x166ae5,_0x41fc33){if(_0x166ae5)throw _0x166ae5;_0x205f33[_0x12ef('0xb')]=_0x41fc33;Zk['serialNumber'](function(_0x2ae4ad,_0x461079){if(_0x2ae4ad)throw _0x2ae4ad;_0x205f33[_0x12ef('0xc')]=_0x461079;Zk['disconnect'](function(_0x18aafa){if(_0x18aafa)throw _0x18aafa;_0x15705d[_0x12ef('0xd')](0xc8)[_0x12ef('0xe')](JSON[_0x12ef('0xf')]({'completed':!![],'data':_0x205f33}));});});});});});});router[_0x12ef('0x4')](_0x12ef('0x10'),function(_0x305ea5,_0x92008b){let _0x2986d0=JSON[_0x12ef('0x11')](_0x305ea5['body'][_0x12ef('0x7')]);Zk=new ZkLib({'ip':_0x2986d0['ip'],'port':0x1112,'inport':0x1450,'timeout':0x1388});Zk[_0x12ef('0x12')](function(_0xf1da1f){if(_0xf1da1f)throw _0xf1da1f;Zk[_0x12ef('0x13')](function(_0x1e2690,_0x113b56){if(_0x1e2690)throw _0x1e2690;Zk[_0x12ef('0x14')](function(_0x3ee0af){if(_0x3ee0af)throw _0x3ee0af;sqlitedb[_0x12ef('0x15')](function(){mysqldb[_0x12ef('0x16')](_0x12ef('0x17'));for(let _0x3d14cc=0x0;_0x3d14cc<_0x113b56[_0x12ef('0x18')];_0x3d14cc++){let _0x5d2390=moment(_0x113b56[_0x3d14cc]['timestamp'])[_0x12ef('0x9')]('YYYY-MM-DD\x20HH:mm:ss');mysqldb[_0x12ef('0x16')](_0x12ef('0x19'),[_0x113b56[_0x3d14cc]['id'],_0x113b56[_0x3d14cc][_0x12ef('0x1a')],_0x5d2390,_0x113b56[_0x3d14cc]['id'],_0x5d2390],_0x38b319=>{if(_0x38b319){throw _0x38b319;}});}mysqldb[_0x12ef('0x16')](_0x12ef('0x1b'));_0x92008b['status'](0xc8)[_0x12ef('0xe')](JSON[_0x12ef('0xf')]({'completed':!![],'attendence':_0x113b56}));});});});});});router[_0x12ef('0x4')](_0x12ef('0x1c'),function(_0x40032a,_0x3b5371){let _0xef54cb=JSON[_0x12ef('0x11')](_0x40032a[_0x12ef('0x6')][_0x12ef('0x7')]);Zk=new ZkLib({'ip':_0xef54cb['ip'],'port':0x1112,'inport':0x1450,'timeout':0x1388});Zk['connect'](function(_0xd284d7){if(_0xd284d7)throw _0xd284d7;Zk[_0x12ef('0x1d')](function(_0x4b57a4,_0xdc8962){if(_0x4b57a4)throw _0x4b57a4;Zk['disconnect'](function(_0x4eaced){if(_0x4eaced)throw _0x4eaced;mysqldb['query'](_0x12ef('0x17'));for(let _0x186bba=0x0;_0x186bba<_0xdc8962['length'];_0x186bba++){mysqldb['query'](_0x12ef('0x1e'),[_0xdc8962[_0x186bba][_0x12ef('0x1f')],_0xdc8962[_0x186bba][_0x12ef('0x20')],_0xdc8962[_0x186bba][_0x12ef('0x21')],_0xdc8962[_0x186bba]['userid'],_0xdc8962[_0x186bba][_0x12ef('0x22')],_0xdc8962[_0x186bba][_0x12ef('0x23')]],_0x5386bf=>{if(_0x5386bf){throw _0x5386bf;}});}mysqldb['query'](_0x12ef('0x1b'));_0x3b5371[_0x12ef('0xd')](0xc8)[_0x12ef('0xe')](JSON['stringify']({'completed':!![],'users':_0xdc8962}));});});});});module[_0x12ef('0x24')]=router;