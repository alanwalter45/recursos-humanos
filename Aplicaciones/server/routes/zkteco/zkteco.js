var _0x42d8=['format','YYYY-MM-DD\x20hh:mm:ss','time','version','serialNumber','serial','disconnect','status','send','stringify','/zkteco/get-attendence','parse','json','getAttendance','parallelize','query','begin\x20transaction','timestamp','YYYY-MM-DD\x20HH:mm:ss','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20INSERT\x20INTO\x20marcaciones(user_id,estado,fecha_hora)\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20SELECT\x20?,?,?\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20WHERE\x20NOT\x20EXISTS\x20(SELECT\x201\x20from\x20marcaciones\x20where\x20user_id=?\x20and\x20fecha_hora=?)\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','state','commit','/zkteco/get-users','getUser','length','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20INSERT\x20INTO\x20usuarios_biometrico(numero_tarjeta,nombre,contrasenha,user_id,rol)\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20SELECT\x20?,?,?,?,?\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20WHERE\x20NOT\x20EXISTS\x20(SELECT\x201\x20from\x20usuarios_biometrico\x20where\x20user_id=?)\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','cardno','name','rol','userid','zklib','Router','moment','./../../databaseMysql','post','body','connect','getTime'];(function(_0x106d95,_0x5aa29d){var _0x4e8391=function(_0x53c94a){while(--_0x53c94a){_0x106d95['push'](_0x106d95['shift']());}};_0x4e8391(++_0x5aa29d);}(_0x42d8,0x1e6));var _0x1d88=function(_0xe98bdf,_0x244563){_0xe98bdf=_0xe98bdf-0x0;var _0x4212a0=_0x42d8[_0xe98bdf];return _0x4212a0;};const ZkLib=require(_0x1d88('0x0'));const express=require('express');const router=express[_0x1d88('0x1')]();const moment=require(_0x1d88('0x2'));const mysqldb=require(_0x1d88('0x3'));router[_0x1d88('0x4')]('/zkteco/info-general',function(_0x1a1896,_0x3d6f59){let _0x597ad6=JSON['parse'](_0x1a1896[_0x1d88('0x5')]['json']);Zk=new ZkLib({'ip':_0x597ad6['ip'],'port':0x1112,'inport':0x1450,'timeout':0x1388});Zk[_0x1d88('0x6')](function(_0x35456a){if(_0x35456a)throw _0x35456a;var _0x100fcd={};Zk[_0x1d88('0x7')](function(_0x1571e6,_0x247d2f){if(_0x1571e6)throw _0x1571e6;var _0x247d2f=moment(_0x247d2f)[_0x1d88('0x8')](_0x1d88('0x9'));_0x100fcd[_0x1d88('0xa')]=_0x247d2f;Zk[_0x1d88('0xb')](function(_0x1bab38,_0x1d87b0){if(_0x1bab38)throw _0x1bab38;_0x100fcd[_0x1d88('0xb')]=_0x1d87b0;Zk[_0x1d88('0xc')](function(_0x2e6c90,_0xeb6b64){if(_0x2e6c90)throw _0x2e6c90;_0x100fcd[_0x1d88('0xd')]=_0xeb6b64;Zk[_0x1d88('0xe')](function(_0x334c4c){if(_0x334c4c)throw _0x334c4c;_0x3d6f59[_0x1d88('0xf')](0xc8)[_0x1d88('0x10')](JSON[_0x1d88('0x11')]({'completed':!![],'data':_0x100fcd}));});});});});});});router[_0x1d88('0x4')](_0x1d88('0x12'),function(_0x2f9735,_0x3ed0ae){let _0x449e84=JSON[_0x1d88('0x13')](_0x2f9735[_0x1d88('0x5')][_0x1d88('0x14')]);Zk=new ZkLib({'ip':_0x449e84['ip'],'port':0x1112,'inport':0x1450,'timeout':0x1388});Zk[_0x1d88('0x6')](function(_0x199a3a){if(_0x199a3a)throw _0x199a3a;Zk[_0x1d88('0x15')](function(_0x4c24e0,_0x5a9e8b){if(_0x4c24e0)throw _0x4c24e0;Zk[_0x1d88('0xe')](function(_0x2c77a6){if(_0x2c77a6)throw _0x2c77a6;sqlitedb[_0x1d88('0x16')](function(){mysqldb[_0x1d88('0x17')](_0x1d88('0x18'));for(let _0x294fdc=0x0;_0x294fdc<_0x5a9e8b['length'];_0x294fdc++){let _0x3e98bb=moment(_0x5a9e8b[_0x294fdc][_0x1d88('0x19')])[_0x1d88('0x8')](_0x1d88('0x1a'));mysqldb['query'](_0x1d88('0x1b'),[_0x5a9e8b[_0x294fdc]['id'],_0x5a9e8b[_0x294fdc][_0x1d88('0x1c')],_0x3e98bb,_0x5a9e8b[_0x294fdc]['id'],_0x3e98bb],_0x4e055b=>{if(_0x4e055b){throw _0x4e055b;}});}mysqldb['query'](_0x1d88('0x1d'));_0x3ed0ae[_0x1d88('0xf')](0xc8)[_0x1d88('0x10')](JSON[_0x1d88('0x11')]({'completed':!![],'attendence':_0x5a9e8b}));});});});});});router[_0x1d88('0x4')](_0x1d88('0x1e'),function(_0x2499cb,_0x353864){let _0x103748=JSON[_0x1d88('0x13')](_0x2499cb[_0x1d88('0x5')][_0x1d88('0x14')]);Zk=new ZkLib({'ip':_0x103748['ip'],'port':0x1112,'inport':0x1450,'timeout':0x1388});Zk[_0x1d88('0x6')](function(_0x35c51c){if(_0x35c51c)throw _0x35c51c;Zk[_0x1d88('0x1f')](function(_0x5732a8,_0xa92c2){if(_0x5732a8)throw _0x5732a8;Zk[_0x1d88('0xe')](function(_0x1ca2b4){if(_0x1ca2b4)throw _0x1ca2b4;mysqldb[_0x1d88('0x17')]('begin\x20transaction');for(let _0x39bc98=0x0;_0x39bc98<_0xa92c2[_0x1d88('0x20')];_0x39bc98++){mysqldb[_0x1d88('0x17')](_0x1d88('0x21'),[_0xa92c2[_0x39bc98][_0x1d88('0x22')],_0xa92c2[_0x39bc98][_0x1d88('0x23')],_0xa92c2[_0x39bc98]['password'],_0xa92c2[_0x39bc98]['userid'],_0xa92c2[_0x39bc98][_0x1d88('0x24')],_0xa92c2[_0x39bc98][_0x1d88('0x25')]],_0x4dc781=>{if(_0x4dc781){throw _0x4dc781;}});}mysqldb[_0x1d88('0x17')](_0x1d88('0x1d'));_0x353864[_0x1d88('0xf')](0xc8)[_0x1d88('0x10')](JSON[_0x1d88('0x11')]({'completed':!![],'users':_0xa92c2}));});});});});module['exports']=router;