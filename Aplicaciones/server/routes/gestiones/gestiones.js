var _0xab80=['/gestiones/get-actual','\x0a\x20\x20SELECT\x20ge.id,\x0a\x20\x20ge.anho,\x0a\x20\x20me.mes,\x0a\x20\x20me.nombre\x0aFROM\x20meses\x20me\x20INNER\x20JOIN\x20gestiones\x20ge\x20ON\x20me.gestion_id=ge.id\x0a\x20\x20WHERE\x20ge.selected=1\x20AND\x20me.selected=1','/gestiones/tickear-gestion','body','UPDATE\x20meses\x20SET\x20selected=0','anho','UPDATE\x20gestiones\x20SET\x20selected=0','UPDATE\x20gestiones\x20SET\x20selected=1\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20WHERE\x20id\x20=\x20?\x20AND\x20anho=?','affectedRows','/gestiones/add-year','INSERT\x20INTO\x20gestiones(anho)\x20values\x20(?)','/gestiones/add-month','mes','toUpperCase','fecha_final','format','YYYY-MM-DD\x20HH:mm:ss','\x0a\x20\x20INSERT\x20INTO\x20meses(nombre,mes,fecha_inicio,fecha_final,selected,gestion_id,fecha_modificacion,status)\x0a\x20\x20SELECT\x20?,?,?,?,?,?,?,?\x0a\x20\x20WHERE\x20NOT\x20EXISTS(SELECT\x201\x20FROM\x20meses\x20WHERE\x20nombre=?\x20AND\x20mes=?\x20AND\x20gestion_id=?\x20AND\x20status=1)','insertId','\x0a\x20\x20\x20\x20\x20\x20SELECT\x20*\x0a\x20\x20\x20\x20\x20\x20FROM\x20registros\x0a\x20\x20\x20\x20\x20\x20WHERE\x20mes_id=\x20(SELECT\x20id\x20FROM\x20meses\x20WHERE\x20selected=1)\x20AND\x20estado>0','forEach','servidor_publico_id','estructura_id','estado','select\x20*\x20from\x20inf_contratacion\x20where\x20registro_id=?','insert\x20into\x20inf_contratacion(lugar_trabajo,forma_ingreso,programa_proyecto,es_tecnico_campo,referencia,registro_id,fecha_inicio,fecha_conclusion,motivo_conclusion,antiguedad_calificada,requisitos_para_acceder_cargo)\x20values(?,?,?,?,?,?,?,?,?,?,?)','lugar_trabajo','forma_ingreso','referencia','fecha_inicio','fecha_conclusion','motivo_conclusion','antiguedad_calificada','requisitos_para_acceder_cargo','select\x20*\x20from\x20inf_politica\x20where\x20registro_id=?','distrito_municipio','region','representante','imagen','documento_requerido_id','tickeado','imagen_adjunta','fecha_modificacion','YYYY-MM-DD','\x27),','replace','select\x20*\x20from\x20procesos_llamadas\x20where\x20registro_id=?','numero_proceso','\x27,\x27','\x27,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','tipo','insert\x20into\x20procesos_llamadas(numero_proceso,fecha_llamada_proceso,descripcion,imagen_adjunta,registro_id,fecha_modificacion,tipo)\x20values\x20','/gestiones/clear-month','\x0a\x20\x20\x20\x20\x20\x20\x20\x20SELECT\x20*\x0a\x20\x20\x20\x20\x20\x20\x20\x20FROM\x20registros\x0a\x20\x20\x20\x20\x20\x20\x20\x20WHERE\x20mes_id=\x20?','delete\x20from\x20inf_politica\x20where\x20registro_id=?','delete\x20from\x20documentos_presentados\x20where\x20registro_id=?','delete\x20from\x20procesos_llamadas\x20where\x20registro_id=?','delete\x20FROM\x20registros\x20WHERE\x20id=?','delete\x20FROM\x20meses\x20WHERE\x20id=?','/gestiones/update-anho','UPDATE\x20gestiones\x20SET\x20anho=?\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20WHERE\x20id\x20=\x20?','exports','express','Router','./../../databaseMysql','moment','post','ensureAuthenticated','parse','json','gestion_id','query','\x0a\x20\x20SELECT\x20me.*,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20ge.id\x20as\x20gestion_id,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20ge.anho\x0a\x20\x20FROM\x20meses\x20me\x20INNER\x20JOIN\x20gestiones\x20ge\x20ON\x20me.gestion_id=ge.id\x0a\x20\x20WHERE\x20ge.id=?\x0a\x20\x20ORDER\x20BY\x20me.mes_numero','status','send','length','get','/gestiones/get-all-actual','\x0a\x20\x20SELECT\x20me.*,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20ge.id\x20as\x20gestion_id,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20ge.anho\x0a\x20\x20FROM\x20meses\x20me\x20INNER\x20JOIN\x20gestiones\x20ge\x20ON\x20me.gestion_id=ge.id\x0a\x20\x20WHERE\x20ge.id=(SELECT\x20id\x20FROM\x20gestiones\x20where\x20selected=1)\x0a\x20\x20ORDER\x20BY\x20me.mes_numero','\x0a\x20\x20SELECT\x20*\x20FROM\x20gestiones'];(function(_0x166ac2,_0x2700e5){var _0x14c7b4=function(_0x410846){while(--_0x410846){_0x166ac2['push'](_0x166ac2['shift']());}};_0x14c7b4(++_0x2700e5);}(_0xab80,0x17e));var _0x210d=function(_0x5e1fff,_0x1975dc){_0x5e1fff=_0x5e1fff-0x0;var _0x3366a2=_0xab80[_0x5e1fff];return _0x3366a2;};const express=require(_0x210d('0x0'));const router=express[_0x210d('0x1')]();const middleware=require('./../../middleware');const mysqldb=require(_0x210d('0x2'));const moment=require(_0x210d('0x3'));router[_0x210d('0x4')]('/gestiones/get-all',middleware[_0x210d('0x5')],(_0x4fc0b3,_0x2fb9bb,_0x390291)=>{const _0x200726=JSON[_0x210d('0x6')](_0x4fc0b3['body'][_0x210d('0x7')]);const _0xe8a3a=_0x200726[_0x210d('0x8')];mysqldb[_0x210d('0x9')](_0x210d('0xa'),[_0xe8a3a],(_0x53b207,_0x4026be)=>{if(_0x53b207){throw _0x53b207;}_0x2fb9bb[_0x210d('0xb')](0xc8)[_0x210d('0xc')]({'success':_0x4026be[_0x210d('0xd')]?!![]:![],'result':_0x4026be});});});router[_0x210d('0xe')](_0x210d('0xf'),middleware[_0x210d('0x5')],(_0xc14a,_0xc854cb,_0xa8857c)=>{mysqldb[_0x210d('0x9')](_0x210d('0x10'),(_0x4ac2a1,_0xf080c3)=>{if(_0x4ac2a1){throw _0x4ac2a1;}_0xc854cb[_0x210d('0xb')](0xc8)[_0x210d('0xc')]({'success':_0xf080c3[_0x210d('0xd')]?!![]:![],'result':_0xf080c3});});});router[_0x210d('0xe')]('/gestiones/get-all-anhos',middleware['ensureAuthenticated'],(_0x2166e2,_0x353472,_0xbd1f0a)=>{mysqldb[_0x210d('0x9')](_0x210d('0x11'),(_0x1e6c3a,_0xb39ce2)=>{if(_0x1e6c3a){throw _0x1e6c3a;}_0x353472['status'](0xc8)[_0x210d('0xc')]({'success':_0xb39ce2['length']?!![]:![],'result':_0xb39ce2});});});router[_0x210d('0xe')](_0x210d('0x12'),(_0x1e5f99,_0x2c743c,_0x9da971)=>{mysqldb[_0x210d('0x9')](_0x210d('0x13'),(_0x2bfce3,_0x2d9567)=>{if(_0x2bfce3)throw _0x2bfce3;_0x2c743c[_0x210d('0xb')](0xc8)[_0x210d('0xc')]({'success':_0x2d9567[_0x210d('0xd')]?!![]:![],'result':_0x2d9567[0x0]});});});router[_0x210d('0x4')](_0x210d('0x14'),middleware[_0x210d('0x5')],(_0x47a793,_0x2c91e4,_0x22deec)=>{const _0x845ca8=JSON['parse'](_0x47a793[_0x210d('0x15')][_0x210d('0x7')]);const _0xb198d5=_0x845ca8['id'];const _0x59730d=_0x845ca8['mes'];mysqldb[_0x210d('0x9')](_0x210d('0x16'),(_0x424be2,_0x35d7c8)=>{if(_0x424be2)throw _0x424be2;mysqldb[_0x210d('0x9')]('UPDATE\x20meses\x20SET\x20selected=1\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20WHERE\x20id\x20=\x20?\x20AND\x20mes=?',[_0xb198d5,_0x59730d],(_0x2ec876,_0x68ba84)=>{if(_0x2ec876)throw _0x2ec876;_0x2c91e4['status'](0xc8)[_0x210d('0xc')]({'success':_0x68ba84['affectedRows']?!![]:![]});});});});router[_0x210d('0x4')]('/gestiones/tickear-anho',middleware[_0x210d('0x5')],(_0x48de70,_0x3b74ad,_0x49598d)=>{const _0x129922=JSON[_0x210d('0x6')](_0x48de70[_0x210d('0x15')][_0x210d('0x7')]);const _0x2d5161=_0x129922['id'];const _0x2a2848=_0x129922[_0x210d('0x17')];mysqldb[_0x210d('0x9')](_0x210d('0x18'),(_0x1f1676,_0x511627)=>{if(_0x1f1676)throw _0x1f1676;mysqldb[_0x210d('0x9')](_0x210d('0x19'),[_0x2d5161,_0x2a2848],(_0x27d607,_0x5efaf8)=>{if(_0x27d607)throw _0x27d607;_0x3b74ad[_0x210d('0xb')](0xc8)[_0x210d('0xc')]({'success':_0x5efaf8[_0x210d('0x1a')]?!![]:![]});});});});router[_0x210d('0x4')](_0x210d('0x1b'),middleware['ensureAuthenticated'],(_0x3898ad,_0x1e9083,_0x2d1803)=>{const _0xbe111=JSON[_0x210d('0x6')](_0x3898ad[_0x210d('0x15')][_0x210d('0x7')]);const _0x240b6f=_0xbe111[_0x210d('0x17')];mysqldb[_0x210d('0x9')]('select\x20count(*)\x20from\x20\x20gestiones',(_0x147d56,_0x55c22c)=>{if(_0x147d56)throw _0x147d56;if(_0x55c22c[_0x210d('0xd')]<=0x32){mysqldb[_0x210d('0x9')](_0x210d('0x1c'),[_0x240b6f],(_0x5e4cb0,_0x5f4b71)=>{if(_0x5e4cb0)throw _0x5e4cb0;_0x1e9083[_0x210d('0xb')](0xc8)[_0x210d('0xc')]({'success':_0x5f4b71[_0x210d('0x1a')]?!![]:![]});});}});});router['post'](_0x210d('0x1d'),middleware[_0x210d('0x5')],(_0x5e682a,_0x42dfc4,_0x565460)=>{const _0x5264f0=JSON[_0x210d('0x6')](_0x5e682a[_0x210d('0x15')][_0x210d('0x7')]);const _0x19e5d9=_0x5264f0['nombre'];const _0x3d05ef=_0x5264f0[_0x210d('0x1e')][_0x210d('0x1f')]();const _0x4b0246=_0x5264f0['fecha_inicio'];const _0x213c34=_0x5264f0[_0x210d('0x20')];const _0x5562d1=0x0;const _0x38a11d=_0x5264f0['id'];const _0x168f6f=moment(new Date())[_0x210d('0x21')](_0x210d('0x22'));const _0x4b83b5=0x0;let _0x230eeb=0x0;mysqldb[_0x210d('0x9')](_0x210d('0x23'),[_0x19e5d9,_0x3d05ef,_0x4b0246,_0x213c34,_0x5562d1,_0x38a11d,_0x168f6f,_0x4b83b5,_0x19e5d9,_0x3d05ef,_0x38a11d],function(_0x4d908d,_0x33d1da){if(_0x4d908d)throw _0x4d908d;var _0x270983=_0x33d1da[_0x210d('0x24')];mysqldb[_0x210d('0x9')](_0x210d('0x25'),function(_0x367175,_0x92ccf3){if(_0x367175)throw _0x367175;_0x92ccf3[_0x210d('0x26')](_0x1a7385=>{mysqldb[_0x210d('0x9')]('\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20INSERT\x20INTO\x20registros(servidor_publico_id,fecha_modificacion,estructura_id,mes_id,estado)\x20VALUES\x20(?,?,?,?,?)\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',[_0x1a7385[_0x210d('0x27')],_0x168f6f,_0x1a7385[_0x210d('0x28')],_0x270983,_0x1a7385[_0x210d('0x29')]],function(_0x1ea1dc,_0x13519a){if(_0x1ea1dc)throw _0x1ea1dc;let _0x427ab6=_0x13519a[_0x210d('0x24')];mysqldb[_0x210d('0x9')](_0x210d('0x2a'),[_0x1a7385['id']],(_0x4a06e6,_0x57aaad)=>{if(_0x4a06e6)throw _0x4a06e6;result=_0x57aaad[0x0];mysqldb['query'](_0x210d('0x2b'),[result[_0x210d('0x2c')],result[_0x210d('0x2d')],result['programa_proyecto'],result['es_tecnico_campo'],result[_0x210d('0x2e')],_0x427ab6,result[_0x210d('0x2f')],result[_0x210d('0x30')],result[_0x210d('0x31')],result[_0x210d('0x32')],result[_0x210d('0x33')]]);});mysqldb['query'](_0x210d('0x34'),[_0x1a7385['id']],(_0x474eb8,_0x3a660d)=>{if(_0x474eb8)throw _0x474eb8;result=_0x3a660d[0x0];mysqldb[_0x210d('0x9')]('insert\x20into\x20inf_politica(distrito_municipio,region,organizacion_respaldo,representante,registro_id,imagen)\x20values(?,?,?,?,?,?)',[result[_0x210d('0x35')],result[_0x210d('0x36')],result['organizacion_respaldo'],result[_0x210d('0x37')],_0x427ab6,result[_0x210d('0x38')]]);});mysqldb[_0x210d('0x9')]('select\x20*\x20from\x20documentos_presentados\x20where\x20registro_id=?',[_0x1a7385['id']],(_0x295f71,_0x53b57a)=>{if(_0x295f71)throw _0x295f71;let _0x3990a3='';_0x53b57a[_0x210d('0x26')](_0x3a6f0f=>{_0x3990a3+='('+_0x3a6f0f[_0x210d('0x39')]+','+_0x427ab6+','+_0x3a6f0f[_0x210d('0x3a')]+',\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+_0x3a6f0f[_0x210d('0x3b')]+',\x27'+moment(_0x3a6f0f[_0x210d('0x3c')])['format'](_0x210d('0x3d'))+_0x210d('0x3e');});_0x3990a3=_0x3990a3[_0x210d('0x3f')](/.$/,';');mysqldb[_0x210d('0x9')]('insert\x20into\x20documentos_presentados(documento_requerido_id,registro_id,tickeado,imagen_adjunta,fecha_modificacion)\x20values\x20'+_0x3990a3);});mysqldb['query'](_0x210d('0x40'),[_0x1a7385['id']],(_0x42cf0b,_0x23ab77)=>{if(_0x42cf0b)throw _0x42cf0b;let _0x49265b='';_0x23ab77[_0x210d('0x26')](_0x3c0fc2=>{_0x49265b+='(\x27'+_0x3c0fc2[_0x210d('0x41')]+_0x210d('0x42')+moment(_0x3c0fc2['fecha_llamada_proceso'])[_0x210d('0x21')](_0x210d('0x3d'))+_0x210d('0x42')+_0x3c0fc2['descripcion']+_0x210d('0x43')+_0x3c0fc2[_0x210d('0x3b')]+','+_0x427ab6+',\x27'+moment(_0x3c0fc2[_0x210d('0x3c')])['format'](_0x210d('0x22'))+_0x210d('0x42')+_0x3c0fc2[_0x210d('0x44')]+_0x210d('0x3e');});_0x49265b=_0x49265b[_0x210d('0x3f')](/.$/,';');mysqldb[_0x210d('0x9')](_0x210d('0x45')+_0x49265b);});});});_0x42dfc4[_0x210d('0xb')](0xc8)[_0x210d('0xc')]({'success':!![],'result':!![]});});});});router[_0x210d('0x4')](_0x210d('0x46'),middleware[_0x210d('0x5')],(_0x4dabb4,_0x90ce8a,_0x14faa6)=>{const _0x411e96=JSON['parse'](_0x4dabb4['body'][_0x210d('0x7')]);const _0x4cfbe2=_0x411e96['id'];mysqldb[_0x210d('0x9')](_0x210d('0x47'),[_0x4cfbe2],function(_0xe2b452,_0x6ff512){if(_0xe2b452)throw _0xe2b452;_0x6ff512['forEach'](_0x320e99=>{mysqldb[_0x210d('0x9')]('delete\x20from\x20inf_contratacion\x20where\x20registro_id=?',[_0x320e99['id']],(_0x19a696,_0x389a39)=>{if(_0x19a696)throw _0x19a696;mysqldb[_0x210d('0x9')](_0x210d('0x48'),[_0x320e99['id']],(_0x48fa3c,_0x573755)=>{if(_0x48fa3c)throw _0x48fa3c;mysqldb[_0x210d('0x9')](_0x210d('0x49'),[_0x320e99['id']],(_0x187152,_0x43fc82)=>{if(_0x187152)throw _0x187152;mysqldb[_0x210d('0x9')](_0x210d('0x4a'),[_0x320e99['id']],(_0x22754e,_0x434ad3)=>{if(_0x22754e)throw _0x22754e;mysqldb[_0x210d('0x9')](_0x210d('0x4b'),[_0x320e99['id']]);});});});});});_0x90ce8a['status'](0xc8)[_0x210d('0xc')]({'success':!![],'result':!![]});});});router[_0x210d('0x4')]('/gestiones/remove-month',middleware[_0x210d('0x5')],(_0x636978,_0x1d3ecc,_0x4339a9)=>{const _0x1bd1d1=JSON[_0x210d('0x6')](_0x636978[_0x210d('0x15')][_0x210d('0x7')]);const _0x1e4baa=_0x1bd1d1['id'];mysqldb[_0x210d('0x9')](_0x210d('0x4c'),[_0x1e4baa],(_0x18a5a1,_0x552edf)=>{if(_0x18a5a1)throw _0x18a5a1;_0x1d3ecc[_0x210d('0xb')](0xc8)['send']({'success':_0x552edf[_0x210d('0x1a')]?!![]:![],'result':_0x552edf[_0x210d('0x1a')]});});});router[_0x210d('0x4')](_0x210d('0x4d'),middleware[_0x210d('0x5')],(_0x13f514,_0x215c01,_0x476db9)=>{const _0x1425e8=JSON['parse'](_0x13f514['body'][_0x210d('0x7')]);const _0x4e337e=_0x1425e8['id'];const _0x4d3586=_0x1425e8[_0x210d('0x17')];mysqldb[_0x210d('0x9')](_0x210d('0x4e'),[_0x4d3586,_0x4e337e],(_0x53f73c,_0x3c251c)=>{if(_0x53f73c)throw _0x53f73c;_0x215c01[_0x210d('0xb')](0xc8)[_0x210d('0xc')]({'success':_0x3c251c['affectedRows']?!![]:![]});});});module[_0x210d('0x4f')]=router;