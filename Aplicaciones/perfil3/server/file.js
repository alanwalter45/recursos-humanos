var _0x5bc4=['mkdirSync','createReadStream','/imagen-perfil.jpg','pipe','createWriteStream','status','/files/upload','single','imagen','file','send','size','nombreArchivo','mimetype','.pdf','audio/mp3','.mp3','video/mp4','.mp4','destination','/files/upload/publicacion','path','replace','img','/publicaciones/','rename','unlink','/files/delete-publicacion','parse','/public/assets/img/publicaciones/','/files/copy-file-biometrico','tipoArchivo','/biometrico/','format','DD-MM-YYYY','chmodSync','777','express','Router','multer','/public/assets/photos','post','body','propietario'];(function(_0x4a249c,_0x1b02b6){var _0x5781ff=function(_0x38cc61){while(--_0x38cc61){_0x4a249c['push'](_0x4a249c['shift']());}};_0x5781ff(++_0x1b02b6);}(_0x5bc4,0xa9));var _0x5a08=function(_0x3d19db,_0xa274e0){_0x3d19db=_0x3d19db-0x0;var _0x56ed56=_0x5bc4[_0x3d19db];return _0x56ed56;};const express=require(_0x5a08('0x0'));const router=express[_0x5a08('0x1')]();const fs=require('fs');const multer=require(_0x5a08('0x2'));const upload=multer({'dest':__dirname+_0x5a08('0x3')});const moment=require('moment');router[_0x5a08('0x4')]('/files/create-folder',(_0x5f202f,_0x280ec5,_0x2cac73)=>{const _0x31f5e8=JSON['parse'](_0x5f202f[_0x5a08('0x5')]['json']);const _0x58762e=_0x31f5e8[_0x5a08('0x6')];const _0x9e2cfe=__dirname+_0x5a08('0x3');if(!fs['existsSync'](_0x9e2cfe+'/'+_0x58762e)){fs[_0x5a08('0x7')](_0x9e2cfe+'/'+_0x58762e);fs[_0x5a08('0x8')](_0x9e2cfe+_0x5a08('0x9'))[_0x5a08('0xa')](fs[_0x5a08('0xb')](_0x9e2cfe+'/'+_0x58762e+_0x5a08('0x9')));}_0x280ec5[_0x5a08('0xc')](0xc8)['send'](!![]);});router[_0x5a08('0x4')](_0x5a08('0xd'),upload[_0x5a08('0xe')](_0x5a08('0xf')),(_0x476ed3,_0x5c4fe2,_0x7b5a8c)=>{let _0x1e13d5=_0x476ed3[_0x5a08('0x10')];if(_0x1e13d5==undefined){_0x5c4fe2[_0x5a08('0xc')](0xc8)[_0x5a08('0x11')](!![]);}else{let _0x1e6bb9=_0x1e13d5['path'];if(_0x1e13d5[_0x5a08('0x12')]/0x400/0x400<=0x3){let _0x1db4f7=_0x476ed3['body'][_0x5a08('0x13')];let _0x24a485=_0x476ed3[_0x5a08('0x5')][_0x5a08('0x6')];let _0x15d632='';switch(_0x1e13d5[_0x5a08('0x14')]){case'image/jpeg':_0x15d632='.jpg';break;case'application/pdf':_0x15d632=_0x5a08('0x15');break;case _0x5a08('0x16'):_0x15d632=_0x5a08('0x17');break;case _0x5a08('0x18'):_0x15d632=_0x5a08('0x19');break;}const _0x40c8f3=_0x1e13d5[_0x5a08('0x1a')]+'/'+_0x24a485+'/'+_0x1db4f7+_0x15d632;fs['rename'](_0x1e6bb9,_0x40c8f3,_0xee8261=>{if(_0xee8261)throw _0xee8261;_0x5c4fe2[_0x5a08('0xc')](0xc8)[_0x5a08('0x11')](!![]);});}else{fs['unlink'](_0x1e6bb9,_0x3d091f=>{if(_0x3d091f)throw _0x3d091f;});_0x5c4fe2[_0x5a08('0xc')](0xc8)[_0x5a08('0x11')](![]);}}});router[_0x5a08('0x4')](_0x5a08('0x1b'),upload['single']('imagen'),(_0x24175b,_0x3e5541,_0x2a1a51)=>{let _0x3bd943=_0x24175b['file'];if(_0x3bd943==undefined){_0x3e5541['status'](0xc8)[_0x5a08('0x11')](!![]);}else{let _0x1b48bc=_0x3bd943[_0x5a08('0x1c')];if(_0x3bd943['size']/0x400/0x400<=0x1){let _0x49d9f7=_0x24175b[_0x5a08('0x5')]['nombreArchivo'];let _0x129fec=_0x24175b[_0x5a08('0x5')][_0x5a08('0x6')];let _0x45bd8=_0x3bd943[_0x5a08('0x1a')][_0x5a08('0x1d')]('photos',_0x5a08('0x1e'))+_0x5a08('0x1f')+_0x49d9f7;fs[_0x5a08('0x20')](_0x1b48bc,_0x45bd8,_0x1edbdc=>{if(_0x1edbdc){throw _0x1edbdc;}_0x3e5541[_0x5a08('0xc')](0xc8)[_0x5a08('0x11')](!![]);});}else{fs[_0x5a08('0x21')](_0x1b48bc,_0x5955f8=>{if(_0x5955f8){throw _0x5955f8;}});_0x3e5541[_0x5a08('0xc')](0xc8)[_0x5a08('0x11')](![]);}}});router[_0x5a08('0x4')](_0x5a08('0x22'),(_0x288544,_0xbb86af,_0x994db8)=>{const _0x190c3f=JSON[_0x5a08('0x23')](_0x288544[_0x5a08('0x5')]['json']);const _0x5ed2a7=_0x190c3f[_0x5a08('0x13')];const _0x3424ed=__dirname+_0x5a08('0x24')+_0x5ed2a7;fs['unlinkSync'](_0x3424ed);_0xbb86af[_0x5a08('0xc')](0xc8)['send'](!![]);});router[_0x5a08('0x4')](_0x5a08('0x25'),upload[_0x5a08('0xe')](_0x5a08('0xf')),(_0x281ef2,_0x59f3e6,_0x353898)=>{let _0xda5613=_0x281ef2['file'];if(_0xda5613==undefined){_0x59f3e6[_0x5a08('0xc')](0xc8)[_0x5a08('0x11')](!![]);}else{let _0x4521dd=_0xda5613[_0x5a08('0x1c')];if(_0xda5613[_0x5a08('0x12')]/0x400/0x400<=0x12c){let _0x3053c1=_0x281ef2[_0x5a08('0x5')][_0x5a08('0x13')];let _0x3c7fe3=_0x281ef2['body'][_0x5a08('0x26')];let _0x136242=_0x281ef2[_0x5a08('0x5')]['propietario'];const _0x2d8205=_0xda5613[_0x5a08('0x1a')]['replace']('photos','docs')+_0x5a08('0x27')+_0x3053c1+moment(new Date()['getTime']())[_0x5a08('0x28')](_0x5a08('0x29'))+'.'+_0x3c7fe3;fs[_0x5a08('0x20')](_0x4521dd,_0x2d8205,_0x5f1e59=>{if(_0x5f1e59){throw _0x5f1e59;}fs[_0x5a08('0x2a')](_0x2d8205,_0x5a08('0x2b'));_0x59f3e6['status'](0xc8)['send'](!![]);});}else{fs[_0x5a08('0x21')](_0x4521dd,_0x1130ca=>{if(_0x1130ca)throw _0x1130ca;});_0x59f3e6[_0x5a08('0xc')](0xc8)[_0x5a08('0x11')](![]);}}});module['exports']=router;