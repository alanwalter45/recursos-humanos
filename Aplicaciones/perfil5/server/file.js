var _0x3dfc=['status','nombreArchivo','body','propietario','mimetype','image/jpeg','.jpg','application/pdf','audio/mp3','video/mp4','.mp4','destination','rename','unlink','/files/upload/publicacion','path','size','img','/files/delete-publicacion','parse','/public/assets/img/publicaciones/','unlinkSync','/files/copy-file-biometrico','photos','docs','/biometrico/','DD-MM-YYYY','chmodSync','777','express','Router','multer','/public/assets/photos','moment','post','/files/create-folder','json','existsSync','mkdirSync','createReadStream','/imagen-perfil.jpg','pipe','createWriteStream','send','/files/upload','single','imagen','file'];(function(_0x49332a,_0x44f47e){var _0x8aa166=function(_0x5863f8){while(--_0x5863f8){_0x49332a['push'](_0x49332a['shift']());}};_0x8aa166(++_0x44f47e);}(_0x3dfc,0x10d));var _0x197c=function(_0x59b5f9,_0x127cd8){_0x59b5f9=_0x59b5f9-0x0;var _0x26a0e7=_0x3dfc[_0x59b5f9];return _0x26a0e7;};const express=require(_0x197c('0x0'));const router=express[_0x197c('0x1')]();const fs=require('fs');const multer=require(_0x197c('0x2'));const upload=multer({'dest':__dirname+_0x197c('0x3')});const moment=require(_0x197c('0x4'));router[_0x197c('0x5')](_0x197c('0x6'),(_0x1c3a80,_0x157db8,_0x3a6d7d)=>{const _0x45dff9=JSON['parse'](_0x1c3a80['body'][_0x197c('0x7')]);const _0x380b16=_0x45dff9['propietario'];const _0x44a043=__dirname+_0x197c('0x3');if(!fs[_0x197c('0x8')](_0x44a043+'/'+_0x380b16)){fs[_0x197c('0x9')](_0x44a043+'/'+_0x380b16);fs[_0x197c('0xa')](_0x44a043+_0x197c('0xb'))[_0x197c('0xc')](fs[_0x197c('0xd')](_0x44a043+'/'+_0x380b16+_0x197c('0xb')));}_0x157db8['status'](0xc8)[_0x197c('0xe')](!![]);});router[_0x197c('0x5')](_0x197c('0xf'),upload[_0x197c('0x10')](_0x197c('0x11')),(_0x2e49e9,_0x60a988,_0x279af8)=>{let _0xa916c8=_0x2e49e9[_0x197c('0x12')];if(_0xa916c8==undefined){_0x60a988[_0x197c('0x13')](0xc8)['send'](!![]);}else{let _0x5764f1=_0xa916c8['path'];if(_0xa916c8['size']/0x400/0x400<=0x3){let _0x2d2a18=_0x2e49e9['body'][_0x197c('0x14')];let _0x2716a8=_0x2e49e9[_0x197c('0x15')][_0x197c('0x16')];let _0x3e293d='';switch(_0xa916c8[_0x197c('0x17')]){case _0x197c('0x18'):_0x3e293d=_0x197c('0x19');break;case _0x197c('0x1a'):_0x3e293d='.pdf';break;case _0x197c('0x1b'):_0x3e293d='.mp3';break;case _0x197c('0x1c'):_0x3e293d=_0x197c('0x1d');break;}const _0x42c5dc=_0xa916c8[_0x197c('0x1e')]+'/'+_0x2716a8+'/'+_0x2d2a18+_0x3e293d;fs[_0x197c('0x1f')](_0x5764f1,_0x42c5dc,_0x5b8f4d=>{if(_0x5b8f4d)throw _0x5b8f4d;_0x60a988['status'](0xc8)[_0x197c('0xe')](!![]);});}else{fs[_0x197c('0x20')](_0x5764f1,_0x2c2887=>{if(_0x2c2887)throw _0x2c2887;});_0x60a988[_0x197c('0x13')](0xc8)['send'](![]);}}});router[_0x197c('0x5')](_0x197c('0x21'),upload[_0x197c('0x10')](_0x197c('0x11')),(_0x2e9079,_0x254098,_0x11e36d)=>{let _0x434ff9=_0x2e9079[_0x197c('0x12')];if(_0x434ff9==undefined){_0x254098[_0x197c('0x13')](0xc8)[_0x197c('0xe')](!![]);}else{let _0x97e894=_0x434ff9[_0x197c('0x22')];if(_0x434ff9[_0x197c('0x23')]/0x400/0x400<=0x1){let _0x237616=_0x2e9079[_0x197c('0x15')]['nombreArchivo'];let _0x32f50e=_0x2e9079['body'][_0x197c('0x16')];let _0x2a519b=_0x434ff9['destination']['replace']('photos',_0x197c('0x24'))+'/publicaciones/'+_0x237616;fs[_0x197c('0x1f')](_0x97e894,_0x2a519b,_0x169342=>{if(_0x169342){throw _0x169342;}_0x254098['status'](0xc8)[_0x197c('0xe')](!![]);});}else{fs[_0x197c('0x20')](_0x97e894,_0x1961b9=>{if(_0x1961b9){throw _0x1961b9;}});_0x254098[_0x197c('0x13')](0xc8)[_0x197c('0xe')](![]);}}});router['post'](_0x197c('0x25'),(_0x58e7a9,_0x238409,_0x414f1f)=>{const _0x2ca7ca=JSON[_0x197c('0x26')](_0x58e7a9[_0x197c('0x15')][_0x197c('0x7')]);const _0x3c05b4=_0x2ca7ca[_0x197c('0x14')];const _0x7fca14=__dirname+_0x197c('0x27')+_0x3c05b4;fs[_0x197c('0x28')](_0x7fca14);_0x238409['status'](0xc8)[_0x197c('0xe')](!![]);});router['post'](_0x197c('0x29'),upload[_0x197c('0x10')](_0x197c('0x11')),(_0x1b118a,_0x2dd089,_0x395570)=>{let _0x38cd66=_0x1b118a[_0x197c('0x12')];if(_0x38cd66==undefined){_0x2dd089['status'](0xc8)[_0x197c('0xe')](!![]);}else{let _0x43c274=_0x38cd66['path'];if(_0x38cd66['size']/0x400/0x400<=0x12c){let _0x1ad1e5=_0x1b118a[_0x197c('0x15')][_0x197c('0x14')];let _0x12b577=_0x1b118a[_0x197c('0x15')]['tipoArchivo'];let _0x170ca1=_0x1b118a['body'][_0x197c('0x16')];const _0x5a6eaf=_0x38cd66[_0x197c('0x1e')]['replace'](_0x197c('0x2a'),_0x197c('0x2b'))+_0x197c('0x2c')+_0x1ad1e5+moment(new Date()['getTime']())['format'](_0x197c('0x2d'))+'.'+_0x12b577;fs[_0x197c('0x1f')](_0x43c274,_0x5a6eaf,_0x4e30ef=>{if(_0x4e30ef){throw _0x4e30ef;}fs[_0x197c('0x2e')](_0x5a6eaf,_0x197c('0x2f'));_0x2dd089[_0x197c('0x13')](0xc8)[_0x197c('0xe')](!![]);});}else{fs[_0x197c('0x20')](_0x43c274,_0x91665e=>{if(_0x91665e)throw _0x91665e;});_0x2dd089[_0x197c('0x13')](0xc8)[_0x197c('0xe')](![]);}}});module['exports']=router;