var _0x29ed=['propietario','image/jpeg','.jpg','application/pdf','audio/mp3','.mp3','video/mp4','.mp4','rename','unlink','/files/upload/publicacion','destination','photos','img','/publicaciones/','/files/delete-publicacion','unlinkSync','/files/copy-file-biometrico','single','tipoArchivo','replace','docs','/biometrico/','777','exports','express','multer','/public/assets/photos','moment','post','/files/create-folder','parse','json','existsSync','mkdirSync','createReadStream','/imagen-perfil.jpg','pipe','status','send','/files/upload','imagen','path','size','body','nombreArchivo'];(function(_0x1e2ce0,_0x645808){var _0x51e139=function(_0x4cc04d){while(--_0x4cc04d){_0x1e2ce0['push'](_0x1e2ce0['shift']());}};_0x51e139(++_0x645808);}(_0x29ed,0xff));var _0x1548=function(_0x210275,_0x44e35a){_0x210275=_0x210275-0x0;var _0x3c9d12=_0x29ed[_0x210275];return _0x3c9d12;};const express=require(_0x1548('0x0'));const router=express['Router']();const fs=require('fs');const multer=require(_0x1548('0x1'));const upload=multer({'dest':__dirname+_0x1548('0x2')});const moment=require(_0x1548('0x3'));router[_0x1548('0x4')](_0x1548('0x5'),(_0x3101e7,_0x3a92fa,_0x974dc1)=>{const _0x597568=JSON[_0x1548('0x6')](_0x3101e7['body'][_0x1548('0x7')]);const _0x2caa2e=_0x597568['propietario'];const _0x5a87cf=__dirname+_0x1548('0x2');if(!fs[_0x1548('0x8')](_0x5a87cf+'/'+_0x2caa2e)){fs[_0x1548('0x9')](_0x5a87cf+'/'+_0x2caa2e);fs[_0x1548('0xa')](_0x5a87cf+_0x1548('0xb'))[_0x1548('0xc')](fs['createWriteStream'](_0x5a87cf+'/'+_0x2caa2e+_0x1548('0xb')));}_0x3a92fa[_0x1548('0xd')](0xc8)[_0x1548('0xe')](!![]);});router['post'](_0x1548('0xf'),upload['single'](_0x1548('0x10')),(_0xdfd639,_0x467eb7,_0x277f13)=>{let _0x290a33=_0xdfd639['file'];if(_0x290a33==undefined){_0x467eb7['status'](0xc8)[_0x1548('0xe')](!![]);}else{let _0xad703a=_0x290a33[_0x1548('0x11')];if(_0x290a33[_0x1548('0x12')]/0x400/0x400<=0x3){let _0x443a92=_0xdfd639[_0x1548('0x13')][_0x1548('0x14')];let _0x3ea475=_0xdfd639[_0x1548('0x13')][_0x1548('0x15')];let _0x1b5902='';switch(_0x290a33['mimetype']){case _0x1548('0x16'):_0x1b5902=_0x1548('0x17');break;case _0x1548('0x18'):_0x1b5902='.pdf';break;case _0x1548('0x19'):_0x1b5902=_0x1548('0x1a');break;case _0x1548('0x1b'):_0x1b5902=_0x1548('0x1c');break;}const _0x32455e=_0x290a33['destination']+'/'+_0x3ea475+'/'+_0x443a92+_0x1b5902;fs[_0x1548('0x1d')](_0xad703a,_0x32455e,_0x11769f=>{if(_0x11769f)throw _0x11769f;_0x467eb7[_0x1548('0xd')](0xc8)[_0x1548('0xe')](!![]);});}else{fs[_0x1548('0x1e')](_0xad703a,_0x5b3a58=>{if(_0x5b3a58)throw _0x5b3a58;});_0x467eb7[_0x1548('0xd')](0xc8)[_0x1548('0xe')](![]);}}});router[_0x1548('0x4')](_0x1548('0x1f'),upload['single'](_0x1548('0x10')),(_0xc3d464,_0x333976,_0x4ee08f)=>{let _0x419c5c=_0xc3d464['file'];if(_0x419c5c==undefined){_0x333976[_0x1548('0xd')](0xc8)[_0x1548('0xe')](!![]);}else{let _0x1f30d5=_0x419c5c[_0x1548('0x11')];if(_0x419c5c[_0x1548('0x12')]/0x400/0x400<=0x1){let _0x536bf6=_0xc3d464[_0x1548('0x13')][_0x1548('0x14')];let _0x4839d7=_0xc3d464[_0x1548('0x13')]['propietario'];let _0x38ce39=_0x419c5c[_0x1548('0x20')]['replace'](_0x1548('0x21'),_0x1548('0x22'))+_0x1548('0x23')+_0x536bf6;fs[_0x1548('0x1d')](_0x1f30d5,_0x38ce39,_0x13e1b6=>{if(_0x13e1b6){throw _0x13e1b6;}_0x333976[_0x1548('0xd')](0xc8)['send'](!![]);});}else{fs[_0x1548('0x1e')](_0x1f30d5,_0x4b3484=>{if(_0x4b3484){throw _0x4b3484;}});_0x333976['status'](0xc8)[_0x1548('0xe')](![]);}}});router[_0x1548('0x4')](_0x1548('0x24'),(_0x5670c4,_0x2855aa,_0x5b0d01)=>{const _0xb42bb7=JSON[_0x1548('0x6')](_0x5670c4[_0x1548('0x13')]['json']);const _0x41618b=_0xb42bb7[_0x1548('0x14')];const _0x51d9d4=__dirname+'/public/assets/img/publicaciones/'+_0x41618b;fs[_0x1548('0x25')](_0x51d9d4);_0x2855aa[_0x1548('0xd')](0xc8)[_0x1548('0xe')](!![]);});router[_0x1548('0x4')](_0x1548('0x26'),upload[_0x1548('0x27')]('imagen'),(_0x4de2b1,_0x3e3ba8,_0x51c844)=>{let _0x212851=_0x4de2b1['file'];if(_0x212851==undefined){_0x3e3ba8['status'](0xc8)[_0x1548('0xe')](!![]);}else{let _0x265e2e=_0x212851[_0x1548('0x11')];if(_0x212851[_0x1548('0x12')]/0x400/0x400<=0x12c){let _0x47577c=_0x4de2b1[_0x1548('0x13')]['nombreArchivo'];let _0x4f9798=_0x4de2b1[_0x1548('0x13')][_0x1548('0x28')];let _0x3144e1=_0x4de2b1['body'][_0x1548('0x15')];const _0x3bfe56=_0x212851[_0x1548('0x20')][_0x1548('0x29')](_0x1548('0x21'),_0x1548('0x2a'))+_0x1548('0x2b')+_0x47577c+moment(new Date()['getTime']())['format']('DD-MM-YYYY')+'.'+_0x4f9798;fs['rename'](_0x265e2e,_0x3bfe56,_0x4ce464=>{if(_0x4ce464){throw _0x4ce464;}fs['chmodSync'](_0x3bfe56,_0x1548('0x2c'));_0x3e3ba8[_0x1548('0xd')](0xc8)[_0x1548('0xe')](!![]);});}else{fs[_0x1548('0x1e')](_0x265e2e,_0x167930=>{if(_0x167930)throw _0x167930;});_0x3e3ba8[_0x1548('0xd')](0xc8)[_0x1548('0xe')](![]);}}});module[_0x1548('0x2d')]=router;